<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    
    <meta content="IE=8" http-equiv="X-UA-Compatible"/>
    <title>OCaml :: FAQ</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta content="Ashish Agarwal, Esther Baruk, Christophe Troestler and many contributors" name="author"/>
    <meta content="" name="description"/>
    <meta content="" name="keywords"/>
    <meta content="OCaml (Weberizer)" name="generator"/>

    <link href="http://ocaml.org/img/favicon.ico" rel="shortcut icon"/>
    <link rel="stylesheet" href="css/bootstrap.css"/>
    <link href="css/ocaml.css" media="all" type="text/css" rel="stylesheet"/>
    <link rel="stylesheet" href="css/bootstrap-responsive.css"/>

    
    

    <meta content="FAQ" property="og:title"/>
    <meta content="non_profit" property="og:type"/>

    <meta content="all" name="robots"/>
  </head>
  <body>
    <div id="header">
      <div class="top">
      </div>
      <div class="bottom">
      </div>
    </div>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
	  
          <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a href="./" class="brand">OCaml</a>

          <div class="nav-collapse">
            <ul class="nav">
	      <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">
    Discover
    <b class="caret"></b>
  </a>
  <ul class="dropdown-menu">
    <li><a href="description.html">What is OCaml?</a></li>
    <li><a href="http://try.ocamlpro.com/">Try it Online</a></li>
    <li><a href="taste.html">100 Lines of OCaml</a></li>
    <li><a href="success.html">Success Stories</a></li>
    <li><a href="companies.html">Who Is Using It?</a></li>
    <li><a href="http://pleac.sourceforge.net/pleac_ocaml/">Pleac</a></li>
    <li><a href="http://rosettacode.org/wiki/Category:OCaml">Rosetta</a>
        <a href="http://langref.org/ocaml">langref.org</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">
    Learn
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="install.html">Install</a></li>
    <li><a href="tutorials/">Tutorials</a></li>
    <li><a href="faq.html">FAQ</a></li>
    <li><a href="books.html">Books</a></li>
    <li><a href="videos.html">Videos</a></li>
    <li><a href="papers.html">Papers</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Use
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="releases/">Releases</a></li>
    <li><a href="libraries.html">Libraries</a></li>
    <li><a href="dev_tools.html">Development Tools</a></li>
    <li><a href="http://caml.inria.fr/pub/docs/manual-ocaml/">User Manual</a></li>
    <li><a href="cheat_sheets.html">Cheat Sheets</a></li>
    <li><a href="http://search.ocaml.jp/">OCaml API Search</a></li>
    <li><a href="http://forge.ocamlcore.org/">Forge</a></li>
    <li><a href="https://github.com/languages/OCaml">GitHub</a></li>
    <li><a href="https://bitbucket.org/repo/all?name=ocaml">Bitbucket</a></li>
    <li><a href="http://gitorious.org/search?page=1&q=ocaml">Gitorious</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Community
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="mailing_lists.html">Mailing Lists</a></li>
    <li><a href="planet/">Blogs</a></li>
    <li><a href="meetings/">Meetings</a></li>
    <li><a href="irc://irc.freenode.net/ocaml">IRC</a></li>
    <li><a href="http://stackoverflow.com/questions/tagged?tagnames=ocaml">Stack Overflow</a></li>
    <li><a href="http://www.reddit.com/r/ocaml/">Reddit</a></li>
    <li><a href="support.html">Commercial Support</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">More
    <b class="caret"></b></a>
  <ul class="dropdown-menu">
    <li><a href="http://caml.inria.fr/mantis/">Mantis Bug Tracker</a></li>
    <li><a href="caml-light/">Caml Light</a></li>
    <li><a href="logos.html">Logos</a></li>
  </ul>
</li>

            </ul>
	    <form action="http://www.google.com/search" method="get" class="navbar-search pull-right">
	      <input placeholder="Search" class="search-query" name="q" type="text"/>
	      <input value="site:http://ocaml.org/" name="q" type="hidden"/>
	    </form>
            
	    
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <span class="navigation-bar">
	<a href="./">Home</a><span class="separation"><img src="img/right_arrow.png" alt="&gt;"/></span>FAQ
	<span id="language">
	  <span class="horizontal-toolbar"><span class="open-bracket">[</span><span class="current-url">En</span><span class="close-bracket">]</span></span>
	</span>
      </span>

      
<h1>FAQ</h1>

<p>See also <a href="http://stackoverflow.com/tags/ocaml/info">Stack
Overflow</a>, which is widely used by the OCaml community.</p>

<ul class="nav nav-tabs">
  <li class="active"><a data-toggle="tab" href="#general">General Questions</a></li>
  <li><a data-toggle="tab" href="#ocaml">Core Language</a></li>
  <li><a data-toggle="tab" href="#module">Module Language</a></li>
  <li><a data-toggle="tab" href="#tools">Development Tools</a></li>
</ul>


<div class="tab-content">
<div id="ocaml" class="tab-pane">
<h2>Core Language</h2><hr/>

<h3>Basic types</h3>

<div class="Q">Is it possible to do computations with arbritrary
precision arithmetics?</div>
<div class="A">OCaml and Caml Light both provide a library that
handles exact arithmetic computation for rational numbers. The library
is called <code>Num</code> in OCaml and <code>camlnum</code> in Caml
Light.<br/>

Operations on big numbers gets the suffix <code>/</code>: addition is
thus <code>+/</code>. You build big numbers using conversion from
(small) integers or character strings.  For printing in the toplevel,
a custom printer can be used.  An example under OCaml is given below.

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input">#load <span class="ocaml-string">&quot;nums.cma&quot;</span></span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span></span><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">open</span> <span class="ocaml-mod">Num</span>
  <span class="kwa">open</span> <span class="ocaml-mod">Format</span></span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span></span><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let</span> <span class="ocaml-function">print_num</span> <span class="ocaml-variable">ff n </span>= fprintf ff <span class="ocaml-string">&quot;%s&quot;</span> (string_of_num n)</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val print_num : Format.formatter -&gt; Num.num -&gt; unit = &lt;fun&gt;
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input">#install_printer print_num</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span></span><span class="ocamltop-prompt"># </span><span class="ocamltop-input">num_of_string <span class="ocaml-string">&quot;2/3&quot;</span></span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>- : Num.num = 2/3
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let </span><span class="ocaml-variable">n</span> = num_of_string <span class="ocaml-string">&quot;1/3&quot;</span> +/ num_of_string <span class="ocaml-string">&quot;2/3&quot;</span></span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val n : Num.num = 1
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let rec</span> <span class="ocaml-function">fact</span> <span class="ocaml-variable">n </span>=
    <span class="kwb">if</span> n &lt;= 0 <span class="kwb">then</span> (num_of_int 1) <span class="kwb">else</span> num_of_int n */ (fact (n - 1))</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val fact : int -&gt; Num.num = &lt;fun&gt;
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input">fact 100</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>- : Num.num =
93326215443944152681699238856266700490715968264381621468592963895217599993229915608941463976156518286253697920827223758251185210916864000000000000000000000000
</span></pre>
</div>


<h3>Data structures</h3>

<div class="Q">My array is modified, and I don't know why</div>
<div class="A">This is due to the physical sharing of two arrays that
you missed. In OCaml there are no implicit array copying. If you give
two names to the same array, every modification on one array will be
visible to the other:

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let </span><span class="ocaml-variable">v</span> = <span class="ocaml-mod">Array</span>.make 3 0</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val v : int array = [|0; 0; 0|]
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let </span><span class="ocaml-variable">w</span> = v</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val w : int array = [|0; 0; 0|]
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input">w.(0) &lt;- 4</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>- : unit = ()
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input">v</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>- : int array = [|4; 0; 0|]
</span></pre>

The physical sharing effect also applies to elements stored in
vectors: if these elements are also vectors, the sharing of these
vectors implies that modifying one of these elements modifies the
others (see also the entry below).
</div>

<div class="Q">How to define multidimensional arrays?</div>
<div class="A">The only way is to define an array whose elements are
arrays themselves (OCaml arrays are unidimensional, they modelize
mathematical vectors).

The naive way to define multidimensional arrays is bogus: the result
is not right because there is some unexpected physical sharing between
the lines of the new array (see also previous entry):

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let </span><span class="ocaml-variable">m</span> = <span class="ocaml-mod">Array</span>.make 2 (<span class="ocaml-mod">Array</span>.make 3 0)</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val m : int array array = [|[|0; 0; 0|]; [|0; 0; 0|]|]
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input">m.(0).(0) &lt;- 1</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>- : unit = ()
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input">m</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>- : int array array = [|[|1; 0; 0|]; [|1; 0; 0|]|]
</span></pre>

The allocation of a new array has two phases. First, the initial value
is computed; then this value is written in each element of the new
array. That's why the line which is allocated by <code>Array.make 3
0</code> is unique and physically shared by all the lines of the array
<code>m</code>.<br/>

The solution is to use the <code>make_matrix</code> primitive that
builds the matrix with all elements equal to the initial value
provided. Alternatively, write the program that allocates a new line
for each line of your matrix. For instance:

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let</span> <span class="ocaml-function">matrix</span> <span class="ocaml-variable">n m init </span>=
    <span class="kwa">let </span><span class="ocaml-variable">result</span> = <span class="ocaml-mod">Array</span>.make n (<span class="ocaml-mod">Array</span>.make m init) <span class="kwa">in</span>
    <span class="kwb">for</span> i = 1 <span class="kwb">to</span> n - 1 <span class="kwb">do</span>
      result.(i) &lt;- <span class="ocaml-mod">Array</span>.make m init
    <span class="kwb">done</span>;
    result</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val matrix : int -&gt; int -&gt; 'a -&gt; 'a array array = &lt;fun&gt;
</span></pre>

In the same vein, the <code>copy_vect</code> primitive gives strange
results, when applied to matrices: you need to write a function that
explicitly copies each line of the matrix at hand:

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let</span> <span class="ocaml-function">copy_matrix</span> <span class="ocaml-variable">m </span>=
    <span class="kwa">let </span><span class="ocaml-variable">l</span> = <span class="ocaml-mod">Array</span>.length m <span class="kwa">in</span>
    <span class="kwb">if</span> l = 0 <span class="kwb">then</span> m <span class="kwb">else</span>
      <span class="kwa">let </span><span class="ocaml-variable">result</span> = <span class="ocaml-mod">Array</span>.make l m.(0) <span class="kwa">in</span>
      <span class="kwb">for</span> i = 0 <span class="kwb">to</span> l - 1 <span class="kwb">do</span>
        result.(i) &lt;- <span class="ocaml-mod">Array</span>.copy m.(i)
      <span class="kwb">done</span>;
      result</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val copy_matrix : 'a array array -&gt; 'a array array = &lt;fun&gt;
</span></pre>
</div>

<h3>Types definitions</h3>

<div class="Q">How to define an enumerated type?</div>
<div class="A">An enumerated type is a sum type with only
constants. For instance, a type with 3 constants:

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">type</span> <span class="ocaml-mod">color</span> = Blue | White | Red</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>type color = Blue | White | Red
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input">Blue</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>- : color = Blue
</span></pre>

The names <code>Blue</code>, <code>White</code> and <code>Red</code>
are the constructors of the <code>color</code> type.  One can define
functions on this type by pattern matching:

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let</span> <span class="ocaml-function">string_of_color</span> = <span class="kwb">function</span>
    | Blue -&gt; <span class="ocaml-string">&quot;blue&quot;</span>
    | White -&gt; <span class="ocaml-string">&quot;white&quot;</span>
    | Red -&gt; <span class="ocaml-string">&quot;red&quot;</span></span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val string_of_color : color -&gt; string = &lt;fun&gt;
</span></pre>
</div>

<div class="Q">How to share a label between two different record
types?</div>
<div class="A">When you define two types sharing a label name, the
last defined type hides the labels of the first type. For instance:

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">type</span> <span class="ocaml-mod">point_3d</span> = {x : float; y : float; z : float}</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>type point_3d = { x : float; y : float; z : float; }
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">type</span> <span class="ocaml-mod">point_2d</span> = {x : float; y : float}</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>type point_2d = { x : float; y : float; }
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input">{x = 10.; y = 20.; z = 30.}</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>- : point_3d = {x = 10.; y = 20.; z = 30.}
</span></pre>

The simplest way to overcome this problem is simply ... to use
different names! For instance

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">type</span> <span class="ocaml-mod">point3d</span> = {x3d : float; y3d : float; z3d : float}</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>type point3d = { x3d : float; y3d : float; z3d : float; }
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">type</span> <span class="ocaml-mod">point2d</span> = {x2d : float; y2d : float}</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>type point2d = { x2d : float; y2d : float; }
</span></pre>

With OCaml, one can propose two others solutions.  First, it is
possible to use modules to define the two types in different name
spaces:

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">module</span> <span class="ocaml-mod">D3</span> <span class="ocaml-variable"></span>= <span class="kwa">struct</span>
    <span class="kwa">type</span> <span class="ocaml-mod">point</span> = {x : float; y : float; z : float}
  <span class="kwa">end</span></span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>module D3 : sig type point = { x : float; y : float; z : float; } end
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">module</span> <span class="ocaml-mod">D2</span> <span class="ocaml-variable"></span>= <span class="kwa">struct</span>
    <span class="kwa">type</span> <span class="ocaml-mod">point</span> = {x : float; y : float}
  <span class="kwa">end</span></span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>module D2 : sig type point = { x : float; y : float; } end
</span></pre>

This way labels can be fully qualified as <code>D3.x</code>
<code>D2.x</code>:

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input">{<span class="ocaml-mod">D3</span>.x = 10.; <span class="ocaml-mod">D3</span>.y = 20.; <span class="ocaml-mod">D3</span>.z = 30.}</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>- : D3.point = {D3.x = 10.; y = 20.; z = 30.}
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input">{<span class="ocaml-mod">D2</span>.x = 10.; <span class="ocaml-mod">D2</span>.y = 20.}</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>- : D2.point = {D2.x = 10.; y = 20.}
</span></pre>

You can also use objects that provide overloading on method names:

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">class</span> <span class="ocaml-function">point_3d</span> <span class="ocaml-variable">~x ~y ~z </span>= <span class="kwa">object</span>
    <span class="kwa">method</span> <span class="ocaml-function">x</span><span class="ocaml-ty"> : float</span> = x
    <span class="kwa">method</span> <span class="ocaml-function">y</span><span class="ocaml-ty"> : float</span> = y
    <span class="kwa">method</span> <span class="ocaml-function">z</span><span class="ocaml-ty"> : float</span> = z
  <span class="kwa">end</span></span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>class point_3d :
  x:float -&gt;
  y:float -&gt;
  z:float -&gt; object method x : float method y : float method z : float end
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">class</span> <span class="ocaml-function">point_2d</span> <span class="ocaml-variable">~x ~y </span>= <span class="kwa">object</span>
    <span class="kwa">method</span> <span class="ocaml-function">x</span><span class="ocaml-ty"> : float</span> = x
    <span class="kwa">method</span> <span class="ocaml-function">y</span><span class="ocaml-ty"> : float</span> = y
  <span class="kwa">end</span></span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>class point_2d :
  x:float -&gt; y:float -&gt; object method x : float method y : float end
</span></pre>

Note that objects provide you more than overloading: you can define
truly polymorphic functions, working on both <code>point_3d</code> and
<code>point_2d</code>, and you can even coerce a <code>point_3d</code>
to a <code>point_2d</code>.
</div>

<div class="Q">How to define two sum types that share constructor
names?</div>
<div class="A">Generally speaking you cannot. As for all other names,
you must use distinct name constructors. However, you can define the
two types in two different name spaces, i.e. into two different
modules. As for labels discussed above, you obtain constructors that
can be qualified by their module names.

With OCaml you can alternatively use polymorphic variants,
i.e. constructors that are, in some sense, <i>predefined</i>, since
they are not defined by a type definition. For instance:

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">type</span> <span class="ocaml-mod">ids</span> = [ `Name | `Val ]</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>type ids = [ `Name | `Val ]
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">type</span> <span class="ocaml-mod">person</span> = [ `Name <span class="kwb">of</span> string ]</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>type person = [ `Name of string ]
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let</span> <span class="ocaml-function">f</span> : <span class="ocaml-ty">person -&gt; string </span>= <span class="kwb">function</span> `Name s -&gt; s</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val f : person -&gt; string = &lt;fun&gt;
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let</span> <span class="ocaml-function">is_name</span> : <span class="ocaml-ty">ids -&gt; bool </span>= <span class="kwb">function</span> `Name -&gt; true | _ -&gt; false</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val is_name : ids -&gt; bool = &lt;fun&gt;
</span></pre>
</div>

<h3>Functions and procedures</h3>

<div class="Q">How to define a function?</div>

<div class="A">In OCaml, the syntax to define functions is close to the
mathematical usage: the definition is introduced by the keyword
<code><b>let</b></code>, followed by the name of the function and its
arguments; then the formula that computes the image of the argument is
written after an <code>=</code> sign.

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let</span> <span class="ocaml-function">successor</span> <span class="ocaml-variable">(n) </span>= n + 1</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val successor : int -&gt; int = &lt;fun&gt;
</span></pre>

In fact, parens surrounding the argument may be omitted, so we
generally write:

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let</span> <span class="ocaml-function">successor</span> <span class="ocaml-variable">n </span>= n + 1</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val successor : int -&gt; int = &lt;fun&gt;
</span></pre>
</div>

<div class="Q">How to define a recursive function?</div>
<div class="A">You need to explicitly tell that you want to define a
recursive function: use &#8220;let rec&#8221; instead of
&#8220;let&#8221;. For instance:

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let rec</span> <span class="ocaml-function">fact</span> <span class="ocaml-variable">n </span>=
    <span class="kwb">if</span> n = 0 <span class="kwb">then</span> 1 <span class="kwb">else</span> n * fact (n - 1)</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val fact : int -&gt; int = &lt;fun&gt;
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let rec</span> <span class="ocaml-function">fib</span> <span class="ocaml-variable">n </span>=
    <span class="kwb">if</span> n &lt;= 1 <span class="kwb">then</span> n <span class="kwb">else</span> fib (n - 1) + fib (n - 2)</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val fib : int -&gt; int = &lt;fun&gt;
</span></pre>

Functions may be mutually recursive:

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let rec</span> <span class="ocaml-function">odd</span> <span class="ocaml-variable">n </span>=
    <span class="kwb">if</span> n = 0 <span class="kwb">then</span> true
    <span class="kwb">else</span> <span class="kwb">if</span> n = 1 <span class="kwb">then</span> false <span class="kwb">else</span> even (n - 1)
  <span class="kwa">and</span> <span class="ocaml-function">even</span> <span class="ocaml-variable">n </span>=
    <span class="kwb">if</span> n = 0 <span class="kwb">then</span> false
    <span class="kwb">else</span> <span class="kwb">if</span> n = 1 <span class="kwb">then</span> true <span class="kwb">else</span> odd (n - 1)</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val odd : int -&gt; bool = &lt;fun&gt;
val even : int -&gt; bool = &lt;fun&gt;
</span></pre>
</div>

<div class="Q">How to apply a function?</div>
<div class="A">Functions are applied as in mathematics: write the
function's name, followed by its argument enclosed in parens: f
(x). In practice, parens are omitted in case of constants or
identifiers: we write <code>fib 2</code> instead of <code>fib
(2)</code>, and <code>fact x</code> instead of <code>fact
(x)</code>.<br/>

When the argument of a function is more complex than just an
identifier, you must enclose this argument between parentheses. In
particular you need parens when the argument is a negative constant
number: to apply <code>f</code> to <code>-1</code> you must write
<code>f (-1)</code> and <strong>not</strong> <code>f -1</code>
that is syntactically similar to <code>f - 1</code> (hence it is a
subtraction, not an application).
</div>

<div class="Q">How to define a procedure?</div>
<div class="A">Recall that <em>procedures</em> are commands that
produce an <em>effect</em> (for instance printing something on the
terminal or writing some memory location), but have no mathematically
meaningful result.<br/>

In OCaml, there is no special treatment of procedures: they are just
considered as special cases of functions that return the special
&#8220;meaningless&#8221; value <a shape="rect" href="donnees_de_base-eng.html#units"><code>()</code></a>. For instance, the
<code>print_string</code> primitive that prints a character string on
the terminal, just returns <code>()</code> as a way of
indicating that its job has been properly completed.<br/>

Procedures that do not need any meaningful argument, get
<code>()</code> as dummy argument. For instance, the
<code>print_newline</code> procedure, that outputs a newline on the
terminal, gets no meaningful argument: it has type <code>unit 
     -&gt; unit</code>.<br/>
Procedures with argument are defined exactly as ordinary
functions. For instance:

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let</span> <span class="ocaml-function">message</span> <span class="ocaml-variable">s </span>= print_string s; print_newline()</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val message : string -&gt; unit = &lt;fun&gt;
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input">message <span class="ocaml-string">&quot;Hello world!&quot;</span></span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout">Hello world!
</span><span class="ocamltop-stderr"></span>- : unit = ()
</span></pre>
</div>

<div class="Q">How to define a procedure/function that takes no
argument?</div>
<div class="A">Note that it is impossible to define a procedure
without any argument at all: its definition would imply to execute it,
and there would be no way to call it afterwards. In the following
fragment <code>double_newline</code> is bound to
<code>()</code>, and its further evaluation never
produces carriage returns as may be erroneously expected by the user.

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let </span><span class="ocaml-variable">double_newline</span> = print_newline(); print_newline()</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout">

</span><span class="ocamltop-stderr"></span>val double_newline : unit = ()
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input">double_newline</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>- : unit = ()
</span></pre>

The correct definition and usage of this procedure is:

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let</span> <span class="ocaml-function">double_newline</span> <span class="ocaml-variable">() </span>= print_newline(); print_newline()</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val double_newline : unit -&gt; unit = &lt;fun&gt;
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input">double_newline</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>- : unit -&gt; unit = &lt;fun&gt;
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input">double_newline ()</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout">

</span><span class="ocamltop-stderr"></span>- : unit = ()
</span></pre>
</div>

<div class="Q">How to define a function with more than one
argument?</div>
<div class="A">Just write the list of successive arguments when
defining the function. For instance:

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let</span> <span class="ocaml-function">sum</span> <span class="ocaml-variable">x y </span>= x + y</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val sum : int -&gt; int -&gt; int = &lt;fun&gt;
</span></pre>

then gives the actual arguments in the same order when applying the
function:

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input">sum 1 2</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>- : int = 3
</span></pre>

These functions are named &#8220;curried&#8221; functions, as opposed
to functions with tuples as argument:

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input">let sum' (x, y) = x + y</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val sum' : int * int -&gt; int = &lt;fun&gt;
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input">sum' (1, 2)</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>- : int = 3
</span></pre>
</div>

<div class="Q">How to define a function that has several
results?</div>
<div class="A">You can define a function that return a pair or a
tuple:

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let</span> <span class="ocaml-function">div_mod</span> <span class="ocaml-variable">x y </span>= (x / y, x mod y)</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val div_mod : int -&gt; int -&gt; int * int = &lt;fun&gt;
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input">div_mod 15 7</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>- : int * int = (2, 1)
</span></pre>
</div>

<div class="Q">What is an &#8220;anonymous function&#8221;?</div>
<div class="A">You may use functions that have no names: we call them
functional values or anonymous functions. A functional value is
introduced by the keyword <code><b>fun</b></code>, followed by
its argument, then an arrow <code>-&gt;</code> and the function body.
For instance:

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwb">fun</span> x -&gt; x + 1</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>- : int -&gt; int = &lt;fun&gt;
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input">(<span class="kwb">fun</span> x -&gt; x + 1) 2</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>- : int = 3
</span></pre>
</div>

<div class="Q">What is the difference between <code><b>fun</b></code>
and <code><b>function</b></code>?</div>

<div class="A">Functions are usually introduced by the keyword
<code><b>fun</b></code>. Each parameter is introduced by its own
<code><b>fun</b></code> construct. For instance, the construct:

<pre><span class="listing"><span class="kwb">fun</span> x -&gt; <span class="kwb">fun</span> y -&gt; ...</span></pre>
defines a function with two parameters <code>x</code> and
<code>y</code>.  An equivalent but shorter form is:
<pre><span class="listing"><span class="kwb">fun</span> x y -&gt; ...</span></pre>

<p> Functions that use pattern-matching are
introduced by the keyword <code><b>function</b></code>.
For example:
</p><pre><span class="listing">function None -&gt; false | Some _ -&gt; true</span></pre>

</div>

<div class="Q">My function is never applied</div>
<div class="A">This is probably due to a missing argument: since OCaml
is a functional programming language, there is no error when you
evaluate a function with missing arguments: in this case, a functional
value is returned, but the function is evidently not applied. Example:
if you evaluate <code>print_newline</code> without argument, there is
no error, but nothing happens. The compiler issues a warning in case
of a blatant misuse.

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input">print_newline</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>- : unit -&gt; unit = &lt;fun&gt;
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input">print_newline ()</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout">
</span><span class="ocamltop-stderr"></span>- : unit = ()
</span></pre>
</div>


<h3>Pattern matching</h3>

<div class="Q">How to do nested pattern matching?</div>
<div class="A">You imperatively need to enclose between parens a
pattern matching which is written inside another pattern matching. In
effect, the internal pattern matching &#8220;catches&#8221; all the
pattern matching clauses that are written after it. For instance:

<pre><span class="listing"><span class="kwa">let</span> <span class="ocaml-function">f</span> = <span class="kwb">function</span>
  | 0 -&gt; <span class="kwb">match</span> ... <span class="kwb">with</span> | a -&gt; ... | b -&gt; ...
  | 1 -&gt; ...
  | 2 -&gt; ...</span></pre>

is parsed as

<pre><span class="listing"><span class="kwa">let</span> <span class="ocaml-function">f</span> = <span class="kwb">function</span>
  | 0 -&gt;
     <span class="kwb">match</span> ... <span class="kwb">with</span>
     | a -&gt; ...
     | b -&gt; ...
     | 1 -&gt; ...
     | 2 -&gt; ...</span></pre>

This error may occur for every syntactic construct that involves
pattern matching: <code><b>function</b></code>, <code><b>match</b>
      .. <b>with</b></code>
and <code><b>try</b> ... <b>with</b></code>. The usual trick is to
enclose inner pattern matchings with <code><b>begin</b></code> and
<code><b>end</b></code>. One write:

<pre><span class="listing"><span class="kwa">let</span> <span class="ocaml-function">f</span> = <span class="kwb">function</span>
  | 0 -&gt;
     <span class="kwa">begin</span> <span class="kwb">match</span> ... <span class="kwb">with</span>
     | a -&gt; ...
     | b -&gt; ...
     <span class="kwa">end</span>
  | 1 -&gt; ...
  | 2 -&gt; ...</span></pre>
</div>

<h3>Exceptions</h3>

<h3>Typing</h3>

<div class="Q">Error message: a type is not compatible with
itself</div>
<div class="A">You may obtain the message: This expression has type
&#8220;some type&#8221; but is used with type &#8220;the same some
type&#8221;. This may occur very often when using the interactive
system.<br/>

The reason is that two types with the same name have been defined the
compiler does not confuse the two types, but the types are evidently
written the same. Consider for instance:

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">type</span> <span class="ocaml-mod">t</span> = T <span class="kwb">of</span> int</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>type t = T of int
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let </span><span class="ocaml-variable">x</span> = T 1</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val x : t = T 1
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">type</span> <span class="ocaml-mod">t</span> = T <span class="kwb">of</span> int</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>type t = T of int
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let</span> <span class="ocaml-function">incr</span> = <span class="kwb">function</span> T x -&gt; T (x+1)</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val incr : t -&gt; t = &lt;fun&gt;
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input">incr <span class="ocamltop-error-loc">x</span></span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-error">Error: This expression has type t/1180 but an expression was expected of type
         t/1183
</span></pre>

This phenomenon appears when you load many times the same file into
the interactive system, since each reloading redefines the types. The
solution is to quit your interactive system and reload your files in a
new session.
</div>

<div class="Q">A function obtained through partial application is not
polymorphic enough</div>
<div class="A"> The more common case to get a ``not polymorphic
enough'' definition is when defining a function via partial
application of a general polymorphic function. In OCaml polymorphism is
introduced only through the &#8220;let&#8221; construct, and results
from application are weakly polymorph; hence the function resulting
from the application is not polymorph.

In this case, you recover a fully polymorphic definition by clearly
exhibiting the functionality to the type-checker : define the function
with an explicit functional abstraction, that is, add a
<code><b>function</b></code> construct or an extra parameter (this
rewriting is known as eta-expansion):

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let </span><span class="ocaml-variable">map_id</span> = <span class="ocaml-mod">List</span>.map (function x -&gt; x) <span class="ocaml-comment">(* Result is weakly polymorphic *)</span></span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val map_id : '_a list -&gt; '_a list = &lt;fun&gt;
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input">map_id [1;2]</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>- : int list = [1; 2]
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input">map_id <span class="ocaml-comment">(* No longer polymorphic *)</span></span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>- : int list -&gt; int list = &lt;fun&gt;
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let</span> <span class="ocaml-function">map_id'</span> <span class="ocaml-variable">l </span>= <span class="ocaml-mod">List</span>.map (function x -&gt; x) l</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val map_id' : 'a list -&gt; 'a list = &lt;fun&gt;
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input">map_id' [1;2]</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>- : int list = [1; 2]
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input">map_id' <span class="ocaml-comment">(* Still fully polymorphic *)</span></span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>- : 'a list -&gt; 'a list = &lt;fun&gt;
</span></pre>

The two definitions are semantically equivalent, and the new one can
be assigned a polymorphic type scheme, since it is no more a function
application.
</div>

<div class="Q">The type of this expression contains type variables
that cannot be generalized</div>
<div class="A"> This message appears when the OCaml compiler tries to
compile a function or a value which is monorphic, but for which some
types have not been completely inferred. Some types variables are left
in the type, which are are called &#8220;weak&#8221; (and are
displayed by an underscore: <code>'_a</code>); they will disappear
thanks to type inference as soon as enough informations will be given.

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let </span><span class="ocaml-variable">r</span> = <span class="kwb">ref</span> []</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val r : '_a list ref = {contents = []}
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let </span><span class="ocaml-variable">f</span> = <span class="ocaml-mod">List</span>.map (<span class="kwb">fun</span> x -&gt; x)</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val f : '_a list -&gt; '_a list = &lt;fun&gt;
</span></pre>

Since the expression mentionned in the error message cannot be
compiled as is, two cases must be envisioned:

<ul>
  <li>The expression can really not be turned into a polymorphic
  expression, as in <code>r</code> above. You must use an explicit
  type annotation, in order to turn it into something completely
  monomorphic.</li>

  <li>The expression can be transformed into something polymorphic
  through rewriting some part of the code (for example using <a shape="rect" href="#eta-expansion">eta-expansion</a>) as in the case
  of <code>f</code>.</li>
</ul>
</div>

<div class="Q">How to write a function with polymorphic
arguments?</div>
<div class="A">In ML, an argument of a function cannot be polymorphic
inside the body of the function; hence the following typing:

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let</span> <span class="ocaml-function">f</span> <span class="ocaml-variable">(g : 'a -&gt; 'a) x y </span>= g x, g y</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val f : ('a -&gt; 'a) -&gt; 'a -&gt; 'a -&gt; 'a * 'a = &lt;fun&gt;
</span></pre>

The function is not as polymorphic as we could have hoped.<br/>

Nevertheless, in OCaml it is possible to use first-order
polymorphism. For this, you can use either records or objects; in the
case of records, you need to declare the type before using it in the
function.

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let</span> <span class="ocaml-function">f</span> <span class="ocaml-variable">(o : &lt; g : 'a. 'a -&gt; 'a &gt;) x y </span>= o#g x, o#g y</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val f : &lt; g : 'a. 'a -&gt; 'a &gt; -&gt; 'b -&gt; 'c -&gt; 'b * 'c = &lt;fun&gt;
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">type</span> <span class="ocaml-mod">id</span> = { g : 'a. 'a -&gt; 'a }</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>type id = { g : 'a. 'a -&gt; 'a; }
</span><span class="ocamltop-prompt"># </span><span class="ocamltop-input"><span class="kwa">let</span> <span class="ocaml-function">f</span> <span class="ocaml-variable">r x y </span>= r.g x, r.g y</span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout"></span><span class="ocamltop-stderr"></span>val f : id -&gt; 'a -&gt; 'b -&gt; 'a * 'b = &lt;fun&gt;
</span></pre>

  FIXME: A direct way now exists.
</div>


<h3>Intput/output</h3>

<div class="Q">Why some printing material is mixed up and does not
appear in the right order?</div>
<div class="A">If you use printing functions of the
<code>format</code> module, you might not mix printing commands from
<code>format</code> with printing commands from the basic I/O
system. In effect, the material printed by functions from the
<code>format</code> module is delayed (stored into the pretty-printing
queue) in order to find out the proper line breaking to perform with
the material at hand. By contrast low level output is performed with
no more buffering than usual I/O buffering.

<pre><span class="ocamltop-prompt"># </span><span class="ocamltop-input">print_endline <span class="ocaml-string">&quot;before&quot;</span>;
  <span class="ocaml-mod">Format</span>.print_string <span class="ocaml-string">&quot;MIDDLE&quot;</span>;
  print_endline <span class="ocaml-string">&quot;after&quot;</span></span><span class="ocamltop-prompt">;;</span><br/><span class="ocamltop-output"><span class="ocamltop-stdout">before
after
MIDDLE</span><span class="ocamltop-stderr"></span>- : unit = ()
</span></pre>

To avoid this kind of problems you should not mix printing orders from
<code>format</code> and basic printing commands; that's the reason why
when using functions from the <code>format</code> module, it is
considered good programming habit to open <code>format</code> globally
in order to completely mask low level printing functions by the high
level printing functions provided by <code>format</code>.
</div>

</div>


<div id="general" class="tab-pane active">
<h2>General Questions</h2>

<div class="Q">What is OCaml?</div>
<div class="A">OCaml is a programming language. It is a functional
language, since the basic units of programs are functions.  It is a
strongly-typed language; it means that the objects that you use belong
to a set that has a name, called its type.  In OCaml, types are
managed by the computer, the user has nothing to do about types (types
are synthesized).  The language is available on almost every Unix
platform (including Linux and MacOS X) and on PCs under Windows.  A
brief tour on main <a href="description.html">features</a> of OCaml.</div>

<div class="Q">Under what licensing terms is the OCaml software
available?</div>
<div class="A">The OCaml system is open source software: the compiler
is distributed under the terms of the Q Public License, and its
library is under LGPL; please read the <a href="license.html">license</a> document for more details.  A
BSD-style license is also available for a fee through the <a href="support.html#consortium"> OCaml Consortium</a>.</div>

<div class="Q">What is the meaning of the name
&#8220;OCaml&#8221;</div>
<div class="A">&#8220;Caml&#8221; is an acronym: it stands for
&#8220;Categorical Abstract Machine Language&#8221;. The
&#8220;Categorical Abstract Machine&#8221; is an abstract machine to
define and execute functions. It is issued from theoretical
considerations on the relationship between category theory and
lambda-calculus. The first Caml compiler produced code for this
abstract machine (in 1984).  The &#8220;O&#8221; stands for
&#8220;Objective&#8221; and was added after object oriented features
were available in the language.<br/>

In addition, OCaml is issued from the ML programming language,
designed by Robin Milner in 1978, and used as the programming language
to write the &#8220;proof tactics&#8221; in the LCF proof system.</div>

<div class="Q">Do you write &#8220;Caml&#8221; or &#8220;CAML&#8221;,
&#8220;OCaml&#8221;, &#8220;Ocaml&#8221; or &#8220;OCAML&#8221;?</div>
<div class="A">We write OCaml.<br/>

According to usual rules for acronyms, we should write CAML, as we
write USA. On the other hand, this upper case name seems to
yell all over the place, and writing OCaml is far more pretty and
elegant  with &#8220;O&#8221; and &#8220;C&#8221; capitalized.</div>

<div class="Q">Is OCaml a compiled or interpreted language?</div>
<div class="A">OCaml is compiled.  However each OCaml compiler offers
a top-level interactive loop, that is similar to an interpreter. In
fact, in the interactive system, the user may type in program chunks
(we call these pieces OCaml &#8220;phrases&#8221;) that the system
handles at once, compiling them, executing them, and writing their
results.</div>

<div class="Q">What are the differences between Caml V3.1, Caml Light,
and OCaml?</div>
<div class="A">These are different Caml implementations that have been
developed successively at Inria.  These systems share many features
since they all implement the core of the OCaml language; so the basic
syntax is nearly the same.  However, all these systems have their own
extensions to the Caml core language.<br/>

Caml V3.1 is no longer maintained nor distributed.  <a href="caml-light/">Caml Light</a> is no longer developed, but still
maintained.  Because of its stable status, it is actively used in
education.  Most other users have switched to OCaml, the latest
variant of the language.  This is the version we suggest using in new
software developments. See our brief <a href="history.html">history</a> of the OCaml language.</div>

<div class="Q">How to report a bug in the compilers?</div>
<div class="A">Use the <a href="http://caml.inria.fr/mantis/">bug
tracking system</a> to browse bug reports and features request, and
submit new ones.</div>

</div>

<div id="module" class="tab-pane">
<h2>Module Language</h2>

<div class="Q">Can I have two mutually recursive compilation units /
structures / signatures / functors?</div>
<div class="A">Currently not in the stable langage. However there
exists an <a shape="rect" href="http://caml.inria.fr/pub/docs/manual-ocaml/manual021.html#toc75">OCaml extension</a> (which is subject to change or
removal at any time) which adresses some of these problems.</div>

<div class="Q">How do I express sharing constraints between
modules?</div>
<div class="A">Use manifest type specifications in the arguments of
the functor. For instance, assume defined the following signatures:

<pre><span class="listing"><span class="kwa">module <span class="kwa">type</span></span> <span class="ocaml-mod">S1</span> <span class="ocaml-variable"></span>= <span class="kwa">sig</span> ... <span class="kwa">type</span> t ... <span class="kwa">end</span>
<span class="kwa">module <span class="kwa">type</span></span> <span class="ocaml-mod">S2</span> <span class="ocaml-variable"></span>= <span class="kwa">sig</span> ... <span class="kwa">type</span> u ... <span class="kwa">end</span></span></pre>

To define a functor <code>F</code> that takes two arguments
<code>X:S1</code> and <code>Y:S2</code> such that <code>X.t</code> and
<code>Y.u</code> are the same, write:

<pre><span class="listing">module F (X: S1) (Y: S2 <span class="kwb">with</span> <span class="kwa">type</span> <span class="ocaml-mod">u</span> = <span class="ocaml-mod">X</span>.t) =
  <span class="kwa">struct</span> ... <span class="kwa">end</span></span></pre>

Indeed, internally this expands to

<pre><span class="listing">module F (X: S1) (Y: <span class="kwa">sig</span> ... <span class="kwa">type</span> <span class="ocaml-mod">u</span> = <span class="ocaml-mod">X</span>.t ... <span class="kwa">end</span>) =
  <span class="kwa">struct</span> ... <span class="kwa">end</span></span></pre>

</div>


<div class="Q">Compilation units are forced to be modules. What if I
want to make a unit with a functor or a signature instead?</div>
<div class="A">In OCaml, functors and signatures (module types) can be
components of modules. So, just make the functor or signature be a
component of a compilation unit. A good example is the module
<code>Set</code> from the standard library.
</div>

</div>

<div id="tools" class="tab-pane">
<h2>Development Tools</h2>

<h3>Interactive loop (toplevel)</h3>

<div class="Q">How to stop the evaluation (execution) of an
expression?</div>
<div class="A">It is often possible to interrupt a program or the OCaml
system by typing some combination of keys that is operating system
dependent: under Unix send an interrupt signal (generally
<tt>Control-C</tt>), under Macintosh OS type <tt>Command-.</tt>, under
Windows use the &#8220;OCaml&#8221; menu.
</div>

<div class="Q">How to quit the interactive loop?</div>
<div class="A">With Caml Light, type <code>quit();;</code>.
With OCaml, type <code>#quit;;</code>.  In both, you can also send an
end-of-file (CTRL-D for Unix, CTRL-Z for DOS, etc.).</div>

<h3>Batch Compilers</h3>

<h3>Yacc</h3>

<h3>Lex</h3>
</div>

</div>

    </div>

    
    <br/>
    <hr/>
    <div id="footer">
      Contribute to this project!
      Find us on <a href="https://github.com/ocaml/ocaml.org">Github</a>.
    </div>
    <span title="img/ = image directory from the base of the site"></span>


    
    
    

    <script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
    <script src="js/jquery-1.8.0.min.js"></script>
    
    <script src="js/bootstrap.js"></script>

    <script type="text/javascript">
      var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-22552764-2']); _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-37808023-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>

</body></html>
